<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cloud.api.mapper.PublishMapper">
    <insert id="insertTask">
        <selectKey order="AFTER" resultType="java.lang.Long" keyProperty="task_id">
            select last_insert_id()
        </selectKey>
        insert into
        task
        value (0,#{task.classId},#{task.data},#{task.state},#{task.charge},#{task.releaseTime},#{task.userId},
                #{task.needNumber},#{task.recruitingNumber},#{task.taskComment},#{task.taskDescription},#{task.startTime},
                #{task.endTime},#{task.money},#{task.taskTitle},#{task.traffic})
    </insert>
    <insert id="insertTaskSetTag">
        insert into
        task_set_tag
        value (task_id = #{taskSetTag.taskId},tag_id=#{taskSetTag.tagId})

    </insert>


    <select id="selectUserIdFromOpenId" resultType="java.lang.Long">
        select user_id
        from user
        where open_id = #{openId}
    </select>
    <select id="selectAllTag" resultType="com.cloud.api.bean.entity.Tag">
        select tag_id,tag_name from tag;
    </select>
</mapper>